import requests

# Replace with your actual API key
api_key = "AIzaSyBKlCnVhrk1m7zlnBE_YrzHwLy7WC-3VP0"

# Load prompts from the text file
with open("Data/raw/articles/article_1.txt", "r", encoding="utf-8") as file:
    prompts = file.readlines()

# Open a file for writing responses
with open("Data/processed/responses.txt", "w") as output_file:

    # Send each prompt to Gemini and write response to the file
    for prompt in prompts:
        prompt = prompt.strip()  # Remove any extra whitespace
        data = {
            "prompt": prompt,
            "model": "gemini-pro",  # Specify the model to use
        }

        headers = {
            "Authorization": f"Bearer {api_key}"
        }

        response = requests.post("https://api.google.com/gemini/v1/generateContent", json=data, headers=headers)

        if response.status_code == 200:
            response_json = response.json()
            generated_text = response_json["generatedText"]
            output_file.write(f"Prompt: {prompt}\n")
            output_file.write(f"Response: {generated_text}\n\n")
        else:
            output_file.write(f"Error for prompt: {prompt}\n{response.text}\n\n")

print("Prompts sent and responses saved to responses.txt")